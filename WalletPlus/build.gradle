buildscript {
    def androidGradlePluginVersion= '0.9.2'
    def androidAptVersion = '1.2'
    def robolectricTestPluginVersion = '0.9.3'

    repositories {
        mavenCentral()
        maven {
            url "https://oss.sonatype.org/content/repositories/snapshots/"
        }
    }

    dependencies {
        classpath "com.android.tools.build:gradle:${androidGradlePluginVersion}"
        classpath "com.neenbedankt.gradle.plugins:android-apt:${androidAptVersion}"
        classpath (files("libs/gradle-android-test-plugin-0.9.4-SNAPSHOT.jar"))
//        classpath "org.robolectric.gradle:gradle-android-test-plugin:${robolectricTestPluginVersion}"
    }
}

repositories {
    mavenCentral()
    mavenLocal()
}

apply plugin: 'android'
apply plugin: 'android-apt'
apply plugin: 'android-test'


apt {
    arguments {
        androidManifestFile variant.processResources.manifestFile
        resourcePackageName 'info.korzeniowski.walletplus'
    }
}

android {
    compileSdkVersion 18
    buildToolsVersion '19.0.3'

//    buildTypes {
//        release {
//            runProguard false
//            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
//        }
//    }

    lintOptions {
        abortOnError false
    }

    packagingOptions {
        exclude 'LICENSE.txt'
    }

    defaultConfig {
//        for espresso:
//        testInstrumentationRunner "com.google.android.apps.common.testing.testrunner.GoogleInstrumentationTestRunner"
    }

    sourceSets {
        androidTest.setRoot( 'src/androidTest' )
    }
}

def androidSupportVersion = '19.0.+'
def greenDaoVersion = '1.3.7'
def androidAnnotationsVersion = '2.7.1'
def daggerVersion = '1.2.1'
def commonsLang3Version = '3.3'

androidTest {
    include '**/*Test.class'
    exclude '**/espresso/**/*.class'
    maxHeapSize = "2048m"
}

dependencies {
    repositories {
        mavenCentral()
        maven {
            url 'https://oss.sonatype.org/content/repositories/snapshots/'
        }
    }
    // Android Support
    compile "com.android.support:support-v4:${androidSupportVersion}"
    compile "com.android.support:appcompat-v7:${androidSupportVersion}"

    // GreenDao
    compile "de.greenrobot:greendao:${greenDaoVersion}"

    // Android Annotations
    apt "com.googlecode.androidannotations:androidannotations:${androidAnnotationsVersion}"
    compile "com.googlecode.androidannotations:androidannotations-api:${androidAnnotationsVersion}"

    // Dagger
    apt "com.squareup.dagger:dagger-compiler:${daggerVersion}"
    compile "com.squareup.dagger:dagger:${daggerVersion}"

    // Commons-lang3
    compile "org.apache.commons:commons-lang3:${commonsLang3Version}"

    // JUnit
    androidTestCompile 'junit:junit:4.11'

    // Robolectric
    androidTestCompile('org.robolectric:robolectric:2.3-SNAPSHOT') {
        exclude module: 'classworlds'
        exclude module: 'maven-artifact'
        exclude module: 'maven-artifact-manager'
        exclude module: 'maven-error-diagnostics'
        exclude module: 'maven-model'
        exclude module: 'maven-plugin-registry'
        exclude module: 'maven-profile'
        exclude module: 'maven-project'
        exclude module: 'maven-settings'
        exclude module: 'nekohtml'
        exclude module: 'plexus-container-default'
        exclude module: 'plexus-interpolation'
        exclude module: 'plexus-utils'
        exclude module: 'wagon-file'
        exclude module: 'wagon-http-lightweight'
        exclude module: 'wagon-http-shared'
        exclude module: 'wagon-provider-api'
    }

    // Fest-android
    androidTestCompile 'com.squareup:fest-android:1.0.7'

//    // Espresso
    androidTestCompile ('com.jakewharton.espresso:espresso:1.1-r2') {
        exclude group: 'com.squareup.dagger', module: 'dagger'
    }
    androidTestCompile ('com.jakewharton.espresso:espresso-support-v4:1.1-r2') {
        exclude group: 'com.android.support', module: 'support-v4'
    }
}