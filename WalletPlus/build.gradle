buildscript {
    def androidGradlePluginVersion= '0.11.+'
    def androidAptVersion = '1.2'
//    def robolectricTestPluginVersion = '0.10.+'

    repositories {
        mavenCentral()
        maven {
            url "https://oss.sonatype.org/content/repositories/snapshots/"
        }
    }

    dependencies {
        classpath "com.android.tools.build:gradle:${androidGradlePluginVersion}"
        classpath "com.neenbedankt.gradle.plugins:android-apt:${androidAptVersion}"
//        classpath "org.robolectric.gradle:gradle-android-test-plugin:${robolectricTestPluginVersion}"
        classpath files("libs/robolectric-gradle-plugin-0.11.0-0.11.0.jar")
    }
}

apply plugin: 'android'
apply plugin: 'android-apt'
apply plugin: 'robolectric'

apt {
    arguments {
        androidManifestFile variant.processResources.manifestFile
        resourcePackageName 'info.korzeniowski.walletplus'
    }
}

android {
    compileSdkVersion 19
    buildToolsVersion '19.1.0'

//    buildTypes {
//        release {
//            runProguard false
//            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
//        }
//    }

    lintOptions {
        abortOnError false
    }

    packagingOptions {
        exclude 'LICENSE.txt'
    }

    defaultConfig {
//        for espresso:
//        testInstrumentationRunner "com.google.android.apps.common.testing.testrunner.GoogleInstrumentationTestRunner"
    }

    sourceSets {
        androidTest.setRoot( 'src/androidTest' )
    }
}

robolectric {
    include '**/*Test.class'
    exclude '**/espresso/**/*.class'
    maxHeapSize = "2048m"
}

def androidSupportVersion = '19.1.+'
def greenDaoVersion = '1.3.+'
def androidAnnotationsVersion = '3.0.1'
def daggerVersion = '1.2.+'
def commonsLang3Version = '3.3.+'
def guavaVerions = '17.0'
def JUnitVersion = '4.11'
def robolectricVersion = '2.4-SNAPSHOT'
def festAndroidVersion = '1.0.+'

repositories {
    maven {
        url 'https://oss.sonatype.org/content/repositories/snapshots/'
    }
}

dependencies {
    // Android Support
    compile "com.android.support:support-v4:${androidSupportVersion}"
    compile "com.android.support:appcompat-v7:${androidSupportVersion}"

    // GreenDao
    compile "de.greenrobot:greendao:${greenDaoVersion}"

    // Android Annotations
    apt "org.androidannotations:androidannotations:${androidAnnotationsVersion}"
    compile "org.androidannotations:androidannotations-api:${androidAnnotationsVersion}"

    // Dagger
    apt "com.squareup.dagger:dagger-compiler:${daggerVersion}"
    compile "com.squareup.dagger:dagger:${daggerVersion}"

    // Commons-lang3
    compile "org.apache.commons:commons-lang3:${commonsLang3Version}"

    // Guava
    compile "com.google.guava:guava:${guavaVerions}"

    // JUnit
    androidTestCompile "junit:junit:${JUnitVersion}"

    // Robolectric
    androidTestCompile("org.robolectric:robolectric:${robolectricVersion}") {
        exclude module: 'classworlds'
        exclude module: 'maven-artifact'
        exclude module: 'maven-artifact-manager'
        exclude module: 'maven-error-diagnostics'
        exclude module: 'maven-model'
        exclude module: 'maven-plugin-registry'
        exclude module: 'maven-profile'
        exclude module: 'maven-project'
        exclude module: 'maven-settings'
        exclude module: 'nekohtml'
        exclude module: 'plexus-container-default'
        exclude module: 'plexus-interpolation'
        exclude module: 'plexus-utils'
        exclude module: 'wagon-file'
        exclude module: 'wagon-http-lightweight'
        exclude module: 'wagon-http-shared'
        exclude module: 'wagon-provider-api'
    }

    // Fest-android
    androidTestCompile "com.squareup:fest-android:${festAndroidVersion}"

//    // Espresso
//    androidTestCompile ("com.jakewharton.espresso:espresso:${espressoVersion}") {
//        exclude group: 'com.squareup.dagger', module: 'dagger'
//    }
//    androidTestCompile ("com.jakewharton.espresso:espresso-support-v4:${espressoVersion}") {
//        exclude group: 'com.android.support', module: 'support-v4'
//    }
}